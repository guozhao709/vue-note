# 属性继承

## 概念

传递给组件且没有被声明为props或emits的一个属性或者v-on事件监听器, 可以传递给该组件的根元素, 称为属性继承。

- 若子组件有相同的属性, 将会合并。

- 这种特性可以嵌套。

- 对于v-on, 当在子组件触发事件时, 父组件可以监听到该事件。

## 禁用属性继承

```vue
<script setup>
defineOptions({
  inheritAttrs: false
})
// ...setup 逻辑
</script>
```

禁止继承后, 透传的属性可以在模版表达式中用$attrs访问。

- $attrs 对象包含了除组件所声明的 props 和 emits 之外的所有其他 attribute，例如 class，style，v-on 监听器等等。

- 和 props 有所不同，透传 attributes 在 JavaScript 中保留了它们原始的大小写，所以像 foo-bar 这样的一个 attribute 需要通过 $attrs['foo-bar'] 来访问。

- 像 @click 这样的一个 v-on 事件监听器将在此对象下被暴露为一个函数 $attrs.onClick。

禁用属性继承的功能: 

1. 当目的继承的标签被div等其他父标签包裹时, 这时禁用属性继承, 在目的标签上使用v-bind="$attrs"可以将所有属性绑定其上。

2. 多根节点的组件, 若不禁止, 则会有运行时警告。

## 在js中访问透传属性

```vue
<script setup>
import { useAttrs } from 'vue'

const attrs = useAttrs()
</script>
```

或

```js
export default {
  setup(props, ctx) {
    // 透传 attribute 被暴露为 ctx.attrs
    console.log(ctx.attrs)
  }
}
```

