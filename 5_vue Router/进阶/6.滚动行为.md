# 滚动行为

当切换新路由时，要求:

1. 页面滚动条保持在原来的位置
2. 页面滚动至顶部

vue-router 可以做到

可以在 createRouter 中提供一个 scrollBehavior 方法

```javascript
const router = createRouter({
  scrollBeahvior(to, from, savedPosition) {
    // 表示希望返回到哪个位置
    return { top: 0 }; // 页面滚动至顶部
    return { el: "#app", top: 0, behavior: "smooth" }; // el表示坐标相对于该元素，behavior:'smooth' 表示平滑滚动
    return savedPosition; // 比如购物网站, 划到第50个商品的位置, 点进去, 再返来, 则页面保持在第50位置
    return { el: to.hash }; // 页面滚动到锚点位置
    // 返回 falsy, 不会滚动
  },
});
```

## 延时滚动

可以返回一个 promise

```javascript
const router = createRouter({
  scrollBeahvior(to, from, savedPosition) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve({ top: 0 }); // 页面滚动至顶部
      }, 1000);
    });
  },
});
```

## 高级偏移量

实现更高精度的偏移

```javascript
const router = createRouter({
  scrollBehavior(to, from, savedPosition) {
    const mainElement = document.querySelector("#main");
    if (mainElement) {
      const marginTop = parseFloat(
        getComputedStyle(mainElement).scrollMarginTop   // getComputedStyle 获取元素的样式属性
      );
      return {
        el: mainElement,
        top: marginTop,
      };
    } else {
      return { top: 0 };
    }
  },
});
```
