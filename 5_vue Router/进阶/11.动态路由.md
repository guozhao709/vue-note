# 动态路由

我的理解是: 在程序运行过程中进行路由的配置

## 添加路由

通过两个函数:

1. router.addRoute({})
2. router.removeRoute({})

再通过 router.replace({}) 进行路由的跳转

```javascript
// router/index.js

const router = createRouter({
  history: createWebHashHistory(),
  routes: [
    {
      path: "/:name",
      component: () => import("@/views/User"),
    },
  ],
});
```

```js
// 其他文件
router.addRoute({ path: "/about", component: () => import("@/views/About") });
router.replace(router.currentRoute.value.fullPath); // 可用await进行等待
```

## 在导航守卫中添加路由

```js
router.beforeEach((to) => {
  if (!hasNecessaryRoute(to)) {
    router.addRoute(generateRoute(to));
    // 触发重定向
    return to.fullPath;
  }
});
```

## 删除路由

- 添加一个路由, name 属性与之前相同

- 调用 router.addRoute()的回调

- 调用 router.removeRoute('name')

当路由被删除时，所有的别名和子路由也会被同时删除

## 添加嵌套路由

```js
router.addRoute({ name: "admin", path: "/admin", component: Admin });
router.addRoute("admin", { path: "settings", component: AdminSettings });
```

将 name 作为第一个参数, 用来补充

直接一次性添加:

```js
router.addRoute({
  name: "admin",
  path: "/admin",
  component: Admin,
  children: [{ path: "settings", component: AdminSettings }],
});
```
